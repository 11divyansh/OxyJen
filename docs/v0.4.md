# Oxyjen v0.4 documentation
## Typed, Compile-Time-Safe AI Pipelines

# What's New in v0.4

## 1. Typed LLM Outputs

You can now define:

``` java
SchemaNode<User>
```

...and receive a `User` object directly, not a string.

-   No manual parsing.
-   No fragile regex.
-   No unsafe casting.

------------------------------------------------------------------------

## 2. JSON Schema Generation from Java Classes

Generate a JSON schema automatically:

``` java
JSONSchema schema = SchemaGenerator.fromClass(User.class);
```

Supports:

-   Records
-   POJOs (getter-based)
-   Nested objects
-   Lists / Sets / Arrays
-   Maps\<String, V\>
-   Enums
-   Optional`<T>`
-   Validation annotations

------------------------------------------------------------------------

## 3. Built-in JSON Parser

Oxyjen now includes a lightweight JSON parser:

``` java
Object parsed = JsonParser.parse(jsonString);
```

Parses into:

  JSON      Java
  --------- --------------------------------
  object    Map\<String,Object\>
  array     List`<Object>`{=html}
  string    String
  number    BigDecimal / Long / BigInteger
  boolean   Boolean
  null      null

------------------------------------------------------------------------

## 4. JSON â†’ Java Object Mapping

Convert validated JSON directly into Java types:

``` java
User user = JsonMapper.deserialize(json, User.class);
```

Supports:

-   Records
-   POJOs with setters
-   Nested objects
-   Collections
-   Arrays
-   Maps
-   Enums
-   Optional fields

------------------------------------------------------------------------

## 5. Schema Validation Engine

Validate model output against schema:

``` java
SchemaValidator validator = new SchemaValidator(schema);
var result = validator.validate(json);

if (!result.isValid()) {
    System.out.println(result.formatErrors());
}
```

Detects:

-   Missing required fields
-   Unknown fields
-   Type mismatches
-   Pattern violations
-   Enum mismatches
-   Numeric constraints
-   Nested errors

------------------------------------------------------------------------

## 6. New SchemaNode`<T>`{=html}

SchemaNode combines:

-   LLM call
-   Retry loop
-   Schema validation
-   JSON parsing
-   Java object mapping

### Example

``` java
SchemaNode<User> node = SchemaNode.builder(User.class)
    .model("gpt-4o-mini")
    .schema(SchemaGenerator.fromClass(User.class))
    .maxRetries(3)
    .memory("chat")
    .build();

User user = node.process("Generate a user named Alice aged 30", context);
```

Result:

    User[name=Alice, age=30]

------------------------------------------------------------------------

# Example Usage

## Step 1 --- Define your Java type

### Record example

``` java
@Description("User profile")
public record User(
    @Description("User name")
    @Size(min = 1, max = 50)
    String name,

    @Min(0)
    @Max(150)
    int age
) {}
```

------------------------------------------------------------------------

## Step 2 --- Generate schema

``` java
JSONSchema schema = SchemaGenerator.fromClass(User.class);
System.out.println(schema.toJSON());
```

------------------------------------------------------------------------

## Step 3 --- Build SchemaNode

``` java
SchemaNode<User> node = SchemaNode.builder(User.class)
    .model("gpt-4o-mini")
    .schema(schema)
    .maxRetries(3)
    .build();
```

------------------------------------------------------------------------

## Step 4 --- Run

``` java
User result = node.process(
    "Create a JSON user with name Bob and age 42",
    context
);
```

------------------------------------------------------------------------

## Step 5 --- Use typed result

``` java
System.out.println(result.name());
System.out.println(result.age());
```

------------------------------------------------------------------------

# Supported Java Types

## Primitives

-   int
-   long
-   double
-   float
-   boolean

## Wrappers

-   Integer
-   Long
-   Double
-   Boolean

## Strings

-   String

## Enums

``` java
enum Status { ACTIVE, INACTIVE }
```

## Collections

-   List`<T>`
-   Set`<T>`
-   T\[\]

## Maps

-   Map\<String, T\>

## Optional

-   Optional`<T>`

## Nested Objects

``` java
record Address(String city, String zip) {}
record User(String name, Address address) {}
```

------------------------------------------------------------------------

# Validation Annotations Supported

 | Annotation   | Effect |
 | -------------| ---------------------------|
 | @Description |  Schema description |
 | @Min         |  Numeric minimum |
 | @Max         |  Numeric maximum |
 | @Size        |  String length constraints |
 | @Pattern     |  Regex validation |
 | @JsonIgnore  |  Exclude field |
